.datagrid-sugar-stage {
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.9rem;
	background: var(--datagrid-viewport-bg);
	display: grid;
	grid-template-rows: minmax(0, 1fr) auto;
	min-height: 0;
	min-width: 0;
	overflow: hidden;
	font-family: var(--datagrid-font-family);
	font-size: var(--datagrid-font-size);
	color: var(--datagrid-text-color);
	box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08);
}

.datagrid-sugar-stage__viewport {
	overflow: auto;
	min-width: 0;
	min-height: 0;
	position: relative;
	background: var(--datagrid-viewport-bg);
}

.datagrid-sugar-stage__header {
	display: grid;
	width: max-content;
	min-width: 100%;
	position: sticky;
	top: 0;
	z-index: 10;
	border-bottom: var(--datagrid-header-divider-size) solid var(--datagrid-header-divider-color);
	background: var(--datagrid-header-row-bg);
}

.datagrid-sugar-stage__row {
	display: grid;
	width: max-content;
	min-width: 100%;
	border-bottom: var(--datagrid-row-divider-size) solid var(--datagrid-row-divider-color);
	background: var(--datagrid-row-background-color);
}

.datagrid-sugar-stage__spacer {
	width: 100%;
}

.datagrid-sugar-stage__cell {
	min-height: 36px;
	display: flex;
	align-items: center;
	gap: 0.34rem;
	padding: var(--datagrid-body-cell-padding-y) var(--datagrid-body-cell-padding-x);
	color: var(--datagrid-row-text-color);
	border-right: var(--datagrid-column-divider-size) solid var(--datagrid-column-divider-color);
	position: relative;
	background: transparent;
}

.datagrid-sugar-stage__cell:last-child {
	border-right: 0;
}

.datagrid-sugar-stage__cell--header {
	text-transform: uppercase;
	letter-spacing: 0.08em;
	font-weight: 600;
	font-size: 0.7rem;
	color: var(--datagrid-header-text-color);
	justify-content: space-between;
	user-select: none;
	background: var(--datagrid-header-cell-bg);
}

.datagrid-sugar-stage__cell--header:hover {
	background: var(--datagrid-header-cell-hover-bg);
}

.datagrid-sugar-stage__cell--header.is-select,
.datagrid-sugar-stage__cell.is-select {
	justify-content: center;
	padding: 0.2rem 0.28rem;
}

.datagrid-sugar-stage__cell.is-selected {
	background: transparent;
	box-shadow: inset 0 0 0 1px var(--datagrid-selection-active-border);
}

.datagrid-sugar-stage__cell.is-preview {
	background: transparent;
	box-shadow: inset 0 0 0 1px var(--datagrid-selection-fill-preview-bg);
}

.datagrid-sugar-stage__cell.is-editing {
	background: var(--datagrid-editable-hover-bg);
}

.datagrid-sugar-stage__cell--group {
	border-right: 0;
	background: var(--datagrid-group-row-background-color);
	color: var(--datagrid-group-row-text-color);
}

.datagrid-sugar-stage__group-toggle {
	border: 0;
	background: transparent;
	color: inherit;
	display: inline-flex;
	gap: 0.44rem;
	align-items: center;
	cursor: pointer;
	padding: 0;
}

.datagrid-sugar-stage__header-meta {
	display: inline-flex;
	align-items: center;
	gap: 0.24rem;
}

.datagrid-sugar-stage__header-sort {
	font-size: 0.66rem;
	color: var(--datagrid-sort-indicator-color);
}

.datagrid-sugar-stage__header-priority {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 1.02rem;
	height: 1.02rem;
	border-radius: 999px;
	font-size: 0.62rem;
	font-weight: 700;
	color: var(--datagrid-header-text-color);
	border: 1px solid var(--datagrid-sort-priority-border);
}

.datagrid-sugar-stage__header-filter {
	border: 1px solid var(--datagrid-filter-trigger-border);
	border-radius: 0.36rem;
	background: var(--datagrid-filter-trigger-bg);
	color: var(--datagrid-text-muted);
	width: 1.2rem;
	height: 1.2rem;
	line-height: 1;
	padding: 0;
}

.datagrid-sugar-stage__header-filter:hover {
	border-color: var(--datagrid-filter-trigger-hover-border);
	color: var(--datagrid-filter-trigger-hover-text);
}

.datagrid-sugar-stage__resize-handle {
	position: absolute;
	top: 0;
	right: -3px;
	bottom: 0;
	width: 6px;
	cursor: col-resize;
	z-index: 3;
}

.datagrid-sugar-stage__resize-handle:hover {
	background: var(--datagrid-resize-handle-hover);
}

.datagrid-sugar-stage__row-resize-handle {
	position: absolute;
	left: 6px;
	right: 6px;
	bottom: -3px;
	height: 6px;
	border-radius: 999px;
	cursor: row-resize;
	z-index: 3;
}

.datagrid-sugar-stage__drag {
	border: 0;
	background: transparent;
	color: var(--datagrid-text-muted);
	cursor: grab;
	padding: 0 0.2rem 0 0;
	font-size: 0.85rem;
}

.datagrid-sugar-stage__checkbox {
	width: 0.9rem;
	height: 0.9rem;
	margin: 0;
	accent-color: var(--datagrid-checkbox-accent);
}

.datagrid-sugar-stage__editor {
	width: 100%;
	height: 100%;
	border: 0;
	outline: none;
	border-radius: 0.38rem;
	padding: 0.24rem 0.34rem;
	background: var(--datagrid-editor-bg);
	color: var(--datagrid-text-primary);
	box-shadow: inset 0 0 0 1px var(--datagrid-editor-border);
}

.datagrid-sugar-stage__editor:focus {
	box-shadow: 0 0 0 2px var(--datagrid-editor-focus-ring), inset 0 0 0 1px var(--datagrid-editor-focus-border);
}

.datagrid-sugar-stage__selection-handle {
	position: absolute;
	width: 0.6rem;
	height: 0.6rem;
	right: -0.3rem;
	bottom: -0.3rem;
	border-radius: 50%;
	background: var(--datagrid-selection-handle-bg);
	border: 1px solid var(--datagrid-selection-handle-border);
	cursor: crosshair;
	z-index: 4;
}

.datagrid-sugar-stage__selection-handle.is-move {
	display: block;
	width: 2.4rem;
	height: 2.4rem;
	right: -1.2rem;
	top: -1.2rem;
	bottom: auto;
	border-radius: 50%;
	background: transparent;
	border: 0;
	cursor: move;
	pointer-events: auto;
	z-index: 5;
}

.datagrid-sugar-stage__cell.is-pinned-left,
.datagrid-sugar-stage__cell.is-pinned-right {
	background: var(--datagrid-sticky-bg);
}

.datagrid-sugar-stage__cell.is-pinned-left {
	box-shadow: var(--datagrid-pinned-left-shadow, 1px 0 0 var(--datagrid-column-divider-color));
}

.datagrid-sugar-stage__cell.is-pinned-right {
	box-shadow: var(--datagrid-pinned-right-shadow, -1px 0 0 var(--datagrid-column-divider-color));
}

.datagrid-sugar-stage__empty {
	padding: 1rem;
	color: var(--datagrid-text-muted);
}

.datagrid-sugar-stage__footer {
	display: flex;
	justify-content: center;
	gap: 0.4rem;
	padding: 0.6rem;
	border-top: var(--datagrid-header-divider-size) solid var(--datagrid-header-divider-color);
	background: var(--datagrid-controls-bg);
}

.datagrid-sugar-stage__footer button {
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.45rem;
	background: var(--datagrid-controls-input-bg);
	color: var(--datagrid-text-primary);
	padding: 0.24rem 0.6rem;
	font-size: 0.74rem;
}

.datagrid-sugar-stage__footer span {
	font-size: 0.8rem;
	color: var(--datagrid-text-soft);
}

.datagrid-sugar-filter-popover {
	position: fixed;
	z-index: 146;
	min-width: 240px;
	max-width: 300px;
	display: grid;
	gap: 0.36rem;
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.62rem;
	background: var(--datagrid-controls-bg);
	box-shadow: 0 16px 36px rgba(2, 6, 23, 0.32);
	padding: 0.52rem;
}

.datagrid-sugar-filter-popover h4 {
	margin: 0;
	font-size: 0.72rem;
	text-transform: uppercase;
	letter-spacing: 0.07em;
	color: var(--datagrid-text-soft);
}

.datagrid-sugar-filter-popover label {
	display: grid;
	gap: 0.14rem;
	font-size: 0.72rem;
	color: var(--datagrid-text-soft);
}

.datagrid-sugar-filter-popover input,
.datagrid-sugar-filter-popover select {
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.36rem;
	background: var(--datagrid-editor-bg);
	color: var(--datagrid-text-primary);
	padding: 0.28rem 0.36rem;
	font-size: 0.74rem;
}

.datagrid-sugar-filter-popover__set {
	max-height: 240px;
	overflow: auto;
	display: grid;
	gap: 0.22rem;
}

.datagrid-sugar-filter-popover__set-row {
	display: grid;
	grid-template-columns: auto 1fr auto;
	align-items: center;
	gap: 0.26rem;
}

.datagrid-sugar-filter-popover__set-row .is-link {
	border: 0;
	background: transparent;
	color: var(--datagrid-accent-strong);
	font-size: 0.68rem;
}

.datagrid-sugar-filter-popover__actions {
	display: flex;
	gap: 0.28rem;
}

.datagrid-sugar-filter-popover__actions button {
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.34rem;
	background: var(--datagrid-controls-input-bg);
	color: var(--datagrid-text-primary);
	padding: 0.22rem 0.38rem;
	font-size: 0.7rem;
}

.datagrid-sugar-filter-popover__actions button.is-primary {
	border-color: var(--datagrid-accent-strong);
	background: color-mix(in srgb, var(--datagrid-accent-strong) 25%, transparent);
	color: var(--datagrid-text-primary);
}

.datagrid-sugar-context {
	position: fixed;
	z-index: 140;
	min-width: 220px;
	display: grid;
	gap: 0.18rem;
	padding: 0.36rem;
	border: 1px solid var(--datagrid-glass-border);
	border-radius: 0.68rem;
	background: var(--datagrid-controls-bg);
	box-shadow: 0 20px 44px rgba(2, 6, 23, 0.32);
}

.datagrid-sugar-context__group-title {
	margin: 0.16rem 0 0.1rem;
	font-size: 0.62rem;
	letter-spacing: 0.08em;
	text-transform: uppercase;
	color: var(--datagrid-text-soft);
}

.datagrid-sugar-context__item {
	border: 1px solid transparent;
	border-radius: 0.44rem;
	background: transparent;
	color: var(--datagrid-text-primary);
	padding: 0.3rem 0.42rem;
	text-align: left;
}

.datagrid-sugar-context__item:disabled {
	opacity: 0.45;
}
