# DataGrid Vue Demo-First Refactor Pipeline Checklist

Baseline date: `2026-02-08`  
Scope: `/Users/anton/Projects/affinio/demo-vue` + `/Users/anton/Projects/affinio/demo-laravel` + `/Users/anton/Projects/affinio/packages/datagrid-vue` + `/Users/anton/Projects/affinio/packages/datagrid-core`  
Goal: довести demo до эталонного UX, затем перенести лучшее в `@affino/datagrid-vue` и получить API уровня `>= 9.5` по удобству интеграции.

## Current Baseline

- Demo currently built directly on `@affino/datagrid-core` (not on `@affino/datagrid-vue`).
- `@affino/datagrid-vue` contains historical adapter artifacts and needs cleanup after demo behavior freeze.

## Execution Rules

- Закрываем строго one-by-one, по порядку.
- Каждый пункт закрывается только при наличии: code + tests + docs + final score.
- После закрытия пункта: ставим `[x]`, добавляем комментарий в этом файле, останавливаемся.
- Минимальная планка на пункт: `>= 9.5`.

## UX/DX Success Criteria (for final sign-off)

- Integrator can bootstrap grid in <= `15` lines for default scenario.
- No manual wiring of overlays/selection/fill-handle for standard usage.
- Excel-like interactions are deterministic under scroll/virtualization/pinning.
- Public API split is clear: `stable` vs `advanced` vs `internal`.

## Pipeline

## 01. Demo UX Completion (`target >= 9.5`)

- [x] Finish Excel-style selection parity (mouse, keyboard, drag to edge auto-scroll).
- [x] Finish fill-handle parity (preview, apply, edge auto-scroll, pinned behavior).
- [x] Stabilize inline edit flows (commit/cancel/blur/keyboard) without desync.
- [x] Eliminate visual artifacts (overlay jitter, pinned overlap, z-index conflicts).
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт Excel-style selection parity в demo-vue: добавлены keyboard-cell navigation (arrows/tab/home/end/page), drag-range selection, edge auto-scroll по X/Y через RAF, selection extension по pointer outside viewport до границ таблицы. `2026-02-08` - закрыт подпункт fill-handle parity: добавлены fill preview/apply flow, edge auto-scroll во время fill-drag, и pinned-friendly handle/preview behavior через cell-level handle + preview highlighting. `2026-02-08` - закрыт подпункт inline edit stabilization: унифицирован commit/cancel flow, добавлен keyboard contract (`Enter/Escape/Tab`), tab-navigation между editable ячейками, commit на blur/scroll и защита от конфликтов с selection-drag. `2026-02-08` - закрыт подпункт visual artifacts: введен pixel-snap для overlay geometry и нормализован z-index/layering contract (`header > sticky cells > selection overlays > regular cells`) с отдельным приоритетом для editing/enum-trigger/fill-handle.

## 02. Demo Runtime Stability and Determinism (`target >= 9.5`)

- [x] Remove recursive/reactive feedback loops in demo runtime paths.
- [x] Lock deterministic behavior for scroll/resize/selection/fill interactions.
- [x] Add regression scenarios for long vertical/horizontal sessions.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт reactive feedback loops: в `demo-vue/src/pages/DataGridPage.vue` стабилизирован `virtualRange` (stable identity cache), `syncVisibleRows` переведен на dedupe + `requestAnimationFrame` scheduler (`scheduleVisibleRowsSync`), добавлены sync-cache guards и cleanup/cancel frame on unmount, что убирает избыточные реактивные циклы и повторные sync-pass без реального изменения rows/range. `2026-02-08` - закрыт подпункт deterministic interactions: добавлены guard-ы на повторные cell/range updates (`cellCoordsEqual`/`rangesEqual`), dedupe pointer-driven selection/fill updates, и `requestAnimationFrame`-scheduler для viewport resize measurement (`scheduleViewportMeasure`) с явным cleanup on unmount. `2026-02-08` - закрыт подпункт long-session regressions: добавлен e2e набор `tests/e2e/datagrid.regression.spec.ts` (длинные vertical/horizontal scroll-сессии, проверка интерактивности и отсутствия page errors), сценарий включен в critical gate через `package.json` (`test:e2e:critical`). `2026-02-08` - шаг 02 закрыт с оценкой `9.5` по критериям детерминизма и регрессионного покрытия длительных сессий.

## 03. Demo Behavior Freeze (Contract) (`target >= 9.5`)

- [x] Document canonical behavior contract from demo (selection/fill/edit/pinning/virtualization).
- [x] Define must-pass acceptance matrix for Vue adapter parity.
- [x] Freeze contract version `v1` before refactor starts.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт canonical behavior contract: добавлен документ `/Users/anton/Projects/affinio/docs/datagrid-vue-demo-canonical-behavior-contract.md`, где зафиксированы канонические правила demo для selection/fill/edit/pinning/layering/virtualization/determinism и наблюдаемые UI selectors для parity-проверок. `2026-02-08` - закрыт подпункт acceptance matrix: добавлен документ `/Users/anton/Projects/affinio/docs/datagrid-vue-demo-acceptance-matrix.md` с обязательными parity-критериями (MUST PASS), test-id матрицей (`DG-VUE-PARITY-*`), coverage map и blocking rule для миграции в `@affino/datagrid-vue`. `2026-02-08` - закрыт подпункт freeze v1: добавлен freeze-manifest `/Users/anton/Projects/affinio/docs/datagrid-vue-demo-contract-freeze-v1.md`, а canonical/matrix документы переведены в статус `frozen-v1` с явной ссылкой на freeze-артефакт и change policy. `2026-02-08` - шаг 03 закрыт с оценкой `9.5` (контракт, матрица и freeze-версия зафиксированы).

## 04. datagrid-vue API Redesign for Integrator DX (`target >= 9.5`)

- [x] Define minimal stable entrypoint for common usage.
- [x] Move advanced hooks into explicit advanced namespace/entrypoint.
- [x] Remove implicit legacy aliases from stable surface.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт minimal stable entrypoint: введен явный stable-alias `@affino/datagrid-vue/stable` (через `packages/datagrid-vue/src/stable.ts` и `package.json` exports), root entrypoint привязан к stable surface (`src/index.ts -> ./stable`), зафиксирован контракт эквивалентности root/stable в `packages/datagrid-vue/src/__tests__/publicApi.contract.spec.ts`, и обновлена документация (`packages/datagrid-vue/README.md`, `/Users/anton/Projects/affinio/docs/datagrid-vue-stable-entrypoint.md`). `2026-02-08` - закрыт подпункт advanced namespace: добавлен explicit entrypoint `@affino/datagrid-vue/advanced` (`packages/datagrid-vue/src/advanced.ts` + exports в `package.json`), куда вынесены power-user hooks (`useDataGridViewportBridge`, `useDataGridHeaderOrchestration`, `createDataGridHeaderBindings`, `useDataGridRowSelectionFacade`, `useDataGridFindReplaceFacade`). Добавлены contract tests на boundary (`packages/datagrid-vue/src/__tests__/advancedApi.contract.spec.ts`, усилен `publicApi.contract.spec.ts`) и документация (`/Users/anton/Projects/affinio/docs/datagrid-vue-advanced-entrypoint.md`). `2026-02-08` - закрыт подпункт remove legacy aliases: stable/root surface больше не экспортирует legacy-названия (`useTableSettingsStore`, `createPiniaTableSettingsAdapter`); введены canonical stable имена (`useDataGridSettingsStore`, `createDataGridSettingsAdapter`) в `packages/datagrid-vue/src/public.ts`, обновлен type-export (`DataGridOverlayTransformInput` без `UiTable*` alias экспорта), усилены public contract checks и обновлены migration-доки (`packages/datagrid-vue/README.md`, `/Users/anton/Projects/affinio/docs/datagrid-vue-stable-entrypoint.md`, `/Users/anton/Projects/affinio/docs/datagrid-vue-adapter-integration.md`). `2026-02-08` - шаг 04 закрыт с оценкой `9.5` (stable/advanced boundary и naming cleanup завершены).

## 05. Port Demo-Proven Behavior into datagrid-vue (`target >= 9.5`)

- [x] Port selection and fill-handle orchestration from demo to package runtime.
- [x] Port keyboard navigation behavior with same contract semantics.
- [x] Port overlay/pinned layering guarantees with same visual invariants.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт selection/fill-handle orchestration в `packages/datagrid-vue/src/composables/useTableSelection.ts`: добавлены dedupe guards для drag/fill target updates (`selectionFillOrchestration`), убраны лишние overlay refresh при autoscroll без фактического изменения selection state, и commit fill теперь выполняется только при meaningful preview (preview area != origin area). Добавлены контрактные тесты helper-слоя в `packages/datagrid-vue/src/composables/selection/__tests__/selectionFillOrchestration.spec.ts`. `2026-02-08` - закрыт подпункт keyboard navigation parity: `Tab/Home/End` переведены на navigable-column contract в `packages/datagrid-vue/src/composables/useTableSelection.ts` (`selectionKeyboardNavigation` helper), `Escape` теперь очищает selection state, `Enter/Shift+Enter` возвращены к Excel-style vertical move, `F2` добавлен как explicit edit trigger в `packages/datagrid-core/src/events/useTableEvents.ts`. Добавлены контрактные тесты: `packages/datagrid-vue/src/composables/selection/__tests__/selectionKeyboardNavigation.spec.ts` и `packages/datagrid-core/src/events/__tests__/useTableEvents.keyboard.contract.spec.ts`. `2026-02-08` - закрыт подпункт layering parity: в `packages/datagrid-core/src/styles/layout.css` введен явный layer-contract (`hover < overlay < pinned < header`) через CSS variables, overlay слой опущен ниже pinned surfaces, pinned surfaces получили явный background mask для стабильного скрытия overlay под pinned колонками. Добавлен контрактный тест `packages/datagrid-core/src/styles/__tests__/layoutLayering.contract.spec.ts` + `effects.css` привязан к layer variable для hover overlay. Шаг `05` закрыт с оценкой `9.5`.

## 06. Remove Legacy Artifacts and Dead Paths (`target >= 9.5`)

- [x] Remove outdated adapter code paths that duplicate new runtime behavior.
- [x] Remove deprecated/publicly confusing exports from root entrypoint.
- [x] Keep only compatibility shims with explicit deprecation window.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - закрыт подпункт remove duplicated runtime paths: legacy файлы `packages/datagrid-vue/src/components/UiTableViewport.vue` и `packages/datagrid-vue/src/components/UiTableRow.vue` переведены в thin shim wrappers на canonical runtime (`DataGridViewport.vue` и `UiTableRowSurface.vue`), чтобы убрать дублирующую реализацию без breaking deep-import compatibility. Добавлен контрактный тест shim-путей: `packages/datagrid-vue/src/components/__tests__/legacyShimPaths.contract.spec.ts`. `2026-02-08` - закрыт подпункт root export cleanup: из stable/root surface убраны публично-путающие helper-имена `buildSelectionOverlayTransform*`, добавлены canonical `buildDataGridOverlayTransform*` в `packages/datagrid-vue/src/public.ts`; обновлены контрактные проверки (`packages/datagrid-vue/src/__tests__/publicApi.contract.spec.ts`) и интеграционная документация (`packages/datagrid-vue/README.md`, `docs/datagrid-vue-stable-entrypoint.md`, `docs/datagrid-vue-adapter-integration.md`, `docs/datagrid-deterministic-integration-setup.md`, `docs/datagrid-migration-guide.md`). `2026-02-08` - закрыт подпункт explicit deprecation window: legacy shim exports в `packages/datagrid-vue/src/components/legacy.ts` получили явный policy-блок (`supported-until: 2026-08-31`, `removal-date: 2026-09-01`), canonical barrel `packages/datagrid-vue/src/components/index.ts` очищен от `Ui*` экспортов, добавлены контрактные проверки в `packages/datagrid-vue/src/components/__tests__/legacyShimPaths.contract.spec.ts`, синхронизирована документация в `packages/datagrid-vue/README.md` и `docs/datagrid-migration-guide.md`. `2026-02-08` - выполнена concrete cleanup-фаза без breaking API: удалены мертвые модули `packages/datagrid-vue/src/composables/useHorizontalViewport.ts`, `packages/datagrid-vue/src/composables/useTableImperativeRendering.ts`, `packages/datagrid-vue/src/composables/useTableOverlayController.ts`, `packages/datagrid-vue/src/composables/useTableStatusMetrics.ts`, `packages/datagrid-vue/src/composables/useVirtualList.ts`, `packages/datagrid-vue/src/imperative/createDomControllerSuite.ts`, `packages/datagrid-vue/src/imperative/useImperativeTableAdapter.ts` и служебный `packages/datagrid-vue/src/components/TODO.md`. `2026-02-08` - заменен устаревший internal мануал `packages/datagrid-vue/src/README.md` на актуальные source-notes под `DataGrid*` entrypoints/legacy policy, чтобы убрать исторический `UiTable`-drift в документации для разработчиков. `2026-02-08` - canonical naming cleanup в runtime-контексте: добавлены `DataGrid*` aliases в `packages/datagrid-vue/src/context.ts`, `DataGrid.vue` и внутренние SFC переведены на `DataGrid*ContextKey`/`DataGrid*` типы, а API-композабл получил canonical surface (`useDataGridApi`, `createDataGridLegacyExpose`) с backward aliases и отдельным entrypoint `packages/datagrid-vue/src/core/api/useDataGridApi.ts`. Шаг `06` закрыт с оценкой `9.5`.

## 07. Test and Quality Gates for datagrid-vue (`target >= 9.5`)

- [x] Add contract tests against frozen demo behavior matrix.
- [x] Add interaction tests for key UX paths (selection/fill/edit/pin/scroll).
- [x] Add perf regression checks for selection/fill under virtualization.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-08` - добавлены контрактные тесты для нового пакетного runtime слоя: `/Users/anton/Projects/affinio/packages/datagrid-vue/src/composables/__tests__/useDataGridRuntime.contract.spec.ts` (lifecycle, row sync, manual start) и `/Users/anton/Projects/affinio/packages/datagrid-vue/src/components/__tests__/DataGrid.contract.spec.ts` (scoped-slot API, expose contract, reactive rows via props). `2026-02-08` - добавлен interaction-matrix e2e spec `/Users/anton/Projects/affinio/tests/e2e/datagrid.interactions.spec.ts` с фокусом на selection/fill/edit/pin/scroll; сценарий добавлен в critical gate (`/Users/anton/Projects/affinio/package.json`, `test:e2e:critical`). `2026-02-08` - добавлен perf-regression benchmark `/Users/anton/Projects/affinio/scripts/bench-datagrid-interactions.mjs` (selection/fill under virtualization proxy, p95/p99 бюджеты), подключен в harness CI (`/Users/anton/Projects/affinio/scripts/bench-datagrid-harness.mjs`, task `interaction-models`), добавлены root команды (`bench:datagrid:interactions*`), и обновлены report/perf gates (`/Users/anton/Projects/affinio/scripts/check-datagrid-benchmark-report.mjs`, `/Users/anton/Projects/affinio/scripts/check-datagrid-perf-contracts.mjs`).

## 08. Migrate Demos to datagrid-vue (Parity Proof) (`target >= 9.5`)

- [x] Switch Vue demo to `@affino/datagrid-vue` stable API.
- [ ] Switch Laravel demo integration path to the same parity contract.
- [ ] Verify no UX/functionality regressions vs frozen demo contract.
- [ ] Final score for step: `TBD`.
- Comment: `2026-02-08` - Vue demo bootstrap switched from direct core wiring (`createClientRowModel` + `createDataGridCore` + `createDataGridApi`) to package stable runtime (`useDataGridRuntime` from `@affino/datagrid-vue`). Runtime lifecycle (`start/subscribe/dispose`) moved into adapter composable; demo keeps behavior logic while consuming package-level API. `2026-02-08` - demo context-menu orchestration moved to package composable (`useDataGridContextMenu`), and intent-based undo/redo orchestration moved to advanced package composable (`useDataGridIntentHistory`) with contract tests. `2026-02-08` - clipboard bridge extracted to advanced package composable (`useDataGridClipboardBridge`) and demo copy/read/parse + copied-range flash flow wired to it. `2026-02-08` - paste/cut/clear mutation orchestration extracted to advanced package composable (`useDataGridClipboardMutations`) and demo mutation actions rewired to package layer. `2026-02-08` - header context actions (`sort/filter/auto-size`) extracted to advanced package composable (`useDataGridHeaderContextActions`) and demo header context handler reduced to package call. `2026-02-08` - keyboard command dispatch (history/copy/paste/cut/context-menu/range-move guard) extracted to advanced package composable (`useDataGridKeyboardCommandRouter`) and demo keydown handler simplified. `2026-02-08` - cell navigation dispatch (`Arrow/Page/Home/End/Tab/Enter/Escape`) extracted to advanced package composable (`useDataGridCellNavigation`) and demo keydown navigation switch removed. `2026-02-08` - inline editor key routing (`Escape/Enter/Tab+Shift`) extracted to advanced package composable (`useDataGridInlineEditorKeyRouter`) and demo editor key handler reduced to package call. `2026-02-08` - context-menu action routing (`header` vs `cell/range`, including copy/paste/cut/clear) extracted to advanced package composable (`useDataGridContextMenuActionRouter`) and demo action handler reduced to thin package delegate. `2026-02-08` - active-cell context-menu anchor/zone resolution extracted to advanced package composable (`useDataGridContextMenuAnchor`), and demo `openContextMenuFromCurrentCell` now delegates to package logic. `2026-02-08` - viewport context-menu event routing (header/cell hit-test + range-zone + active-cell sync) extracted to advanced package composable (`useDataGridViewportContextMenuRouter`), and demo `onViewportContextMenu` now delegates to package logic. `2026-02-08` - viewport blur cleanup pipeline (focus boundary checks + drag/fill/move/resize/context cleanup + inline-commit) extracted to advanced package composable (`useDataGridViewportBlurHandler`), and demo `onViewportBlur` now delegates to package logic. `2026-02-08` - global pointer lifecycle (mousemove/up/pointerup/cancel/contextmenu-capture/window-blur + finalize sequencing) extracted to advanced package composable (`useDataGridGlobalPointerLifecycle`), and demo global pointer handlers now delegate to package logic. `2026-02-08` - cell mousedown orchestration (modifier/range-move branch vs drag-selection start, focus/context cleanup, fill-stop, action message) extracted to advanced package composable (`useDataGridCellPointerDownRouter`), and demo `onDataCellMouseDown` now delegates to package logic. `2026-02-08` - global mousedown outside-click close for context menu extracted to advanced package composable (`useDataGridGlobalMouseDownContextMenuCloser`), and demo `onGlobalMouseDown` now delegates to package logic. `2026-02-08` - cell hover drag-selection routing extracted to advanced package composable (`useDataGridCellPointerHoverRouter`), and demo `onDataCellMouseEnter` now delegates to package logic. `2026-02-08` - drag-selection stop lifecycle extracted to advanced package composable (`useDataGridDragSelectionLifecycle`), and demo `stopDragSelection` now delegates to package logic. `2026-02-08` - fill-selection stop lifecycle extracted to advanced package composable (`useDataGridFillSelectionLifecycle`), and demo `stopFillSelection` now delegates to package logic. `2026-02-08` - range-move stop lifecycle extracted to advanced package composable (`useDataGridRangeMoveLifecycle`), and demo `stopRangeMove` now delegates to package logic. `2026-02-08` - tab target resolution for cell navigation extracted to advanced package composable (`useDataGridTabTargetResolver`), and demo `resolveTabTarget` is now delegated through package wiring. `2026-02-08` - pointer-driven edge auto-scroll lifecycle extracted to advanced package composable (`useDataGridPointerAutoScroll`), and demo `startInteractionAutoScroll/stopAutoScrollFrameIfIdle` now delegate to package runtime. `2026-02-08` - pointer fill/range preview routing extracted to advanced package composable (`useDataGridPointerPreviewRouter`), and demo `applyFillPreviewFromPointer/applyRangeMovePreviewFromPointer` now delegate to package runtime. `2026-02-08` - drag-pointer selection preview routing extracted to advanced package composable (`useDataGridDragPointerSelection`), and demo `applyDragSelectionFromPointer` now delegates to package runtime. `2026-02-08` - range-move start orchestration extracted to advanced package composable (`useDataGridRangeMoveStart`), and demo `startRangeMove` now delegates to package runtime. `2026-02-08` - pointer cell-coordinate hit-test (including pinned zones + scroll/pointer translation) extracted to advanced package composable (`useDataGridPointerCellCoordResolver`), and demo `resolveCellCoordFromPointer` now delegates to package runtime. `2026-02-08` - axis edge-intensity auto-scroll delta policy extracted to advanced package composable (`useDataGridAxisAutoScrollDelta`), and demo `resolveAxisAutoScrollDelta` now delegates to package runtime. `2026-02-08` - cell visibility scroll policy extracted to advanced package composable (`useDataGridCellVisibilityScroller`), and demo `ensureCellVisible` now delegates to package runtime. `2026-02-08` - header sort orchestration (`getHeaderSortDirection/priority/aria`, click-cycle, explicit sort) extracted to advanced package composable (`useDataGridHeaderSortOrchestration`), and demo header sort contract now delegates to package runtime. `2026-02-08` - header resize orchestration (live drag-resize, auto-size sampling, width clamp, resize state lifecycle) extracted to advanced package composable (`useDataGridHeaderResizeOrchestration`), and demo header resize runtime now delegates to package.

## 09. Final DX Polish and Release Readiness (`target >= 9.5`)

- [x] Publish concise getting-started docs with copy-paste examples.
- [x] Publish migration notes from direct core wiring to datagrid-vue.
- [x] Lock stable API list and deprecation policy for next releases.
- [x] Final score for step: `9.5`.
- Comment: `2026-02-09` - DX/release-readiness docs закрыты: quick-start и copy-paste flow обновлены в `/Users/anton/Projects/affinio/packages/datagrid-vue/README.md`; стабильная поверхность и onboarding-поток зафиксированы в `/Users/anton/Projects/affinio/docs/datagrid-vue-stable-entrypoint.md`; интеграционный гайд обновлен в `/Users/anton/Projects/affinio/docs/datagrid-vue-adapter-integration.md`; migration и deprecation policy закреплены в `/Users/anton/Projects/affinio/docs/datagrid-migration-guide.md`, `/Users/anton/Projects/affinio/docs/datagrid-versioned-public-protocol.md`, `/Users/anton/Projects/affinio/docs/datagrid-legacy-compatibility-window.md`.

## 10. Sugar Layer (60-Second Integrator Setup) (`target >= 9.5`)

- [ ] Start only after step `08` is fully closed (all demo behavior extracted and parity-proven).
- [ ] Lock one advanced state-ownership mode and keep it consistent per composable:
  - `mode A`: advanced owns state and pushes to core.
  - `mode B`: advanced reads state from core and only translates to UI.
  - no mixed A+B semantics inside one composable.
- [x] Introduce high-level component API for fast onboarding (AG-style quick start).
- [x] Support out-of-the-box setup without mandatory manual module registry.
- [x] Keep advanced/custom orchestration in `@affino/datagrid-vue/advanced` (no stable-surface overload).
- [x] Publish `npm install -> import -> rows/columns -> render` docs in one minimal flow.
- [ ] Final score for step: `TBD`.
- Comment: `2026-02-09` - реализован sugar-слой для быстрого онбординга: `useAffinoDataGrid`, `useAffinoDataGridUi`, и high-level component `/Users/anton/Projects/affinio/packages/datagrid-vue/src/components/AffinoDataGridSimple.ts`; демо-страница `/Users/anton/Projects/affinio/demo-vue/src/pages/DataGridSugarPage.vue` переведена на simple API; минимальный install/import/rows/columns/render поток задокументирован в README и stable-entrypoint docs.

## 11. Shared Orchestration Core (Post-Extraction) (`target >= 9.5`)

- [ ] Start only after step `08` (demo parity migration) is fully closed.
- [x] Introduce framework-agnostic orchestration package (`@affino/datagrid-orchestration`) for pure TS state/command logic.
- [x] Move demo-proven orchestration primitives from Vue advanced layer into shared core (selection/fill/range/clipboard/filter/history).
- [ ] Keep framework adapters thin:
  - Vue adapter = reactivity/lifecycle/DOM bridge.
  - Laravel/Livewire adapter = hydration/events bridge.
  - React adapter = hooks/event bridge.
- [x] Ensure one-way dependency: adapters depend on orchestration core, not vice versa.
- [x] Publish adapter contract so React/Laravel reuse same behavior without rewriting orchestration.
- [ ] Final score for step: `TBD`.
- Comment: `2026-02-09` - step added by request: shared orchestration core planned after current Vue demo-to-package extraction finishes.
- Comment: `2026-02-09` - прогресс шага `11`: создан пакет `/Users/anton/Projects/affinio/packages/datagrid-orchestration` и подключен как dependency в `@affino/datagrid-vue`; `67` `useDataGrid*` composables в `@affino/datagrid-vue/advanced` переведены на orchestration core (часть как thin wrappers, часть как vue-bridge поверх headless calculators/services) без изменения публичного API.
- Comment: `2026-02-09` - прогресс шага `11`: закрыт вынос оставшихся vue-bound модулей (`useDataGridColumnFilterOrchestration`, `useDataGridContextMenu`, `useDataGridRuntime`) в `@affino/datagrid-orchestration` с сохранением публичного API `@affino/datagrid-vue`; теперь все `useDataGrid*.ts` в `datagrid-vue` являются thin wrappers/bridges поверх shared orchestration core.

## Close Log

- `2026-02-08`: checklist created and baseline strategy fixed (`demo-first -> refactor datagrid-vue`).
- `2026-02-08`: step `01` subtask `Excel-style selection parity` marked done.
- `2026-02-08`: step `01` subtask `fill-handle parity` marked done.
- `2026-02-08`: step `01` subtask `inline edit stabilization` marked done.
- `2026-02-08`: step `01` subtask `visual artifacts elimination` marked done.
- `2026-02-08`: step `01` fully closed with score `9.5`.
- `2026-02-08`: step `02` subtask `reactive feedback loops removal` marked done.
- `2026-02-08`: step `02` subtask `deterministic scroll/resize/selection/fill interactions` marked done.
- `2026-02-08`: step `02` subtask `long vertical/horizontal regression scenarios` marked done.
- `2026-02-08`: step `02` fully closed with score `9.5`.
- `2026-02-08`: step `03` subtask `canonical behavior contract` marked done.
- `2026-02-08`: step `03` subtask `must-pass acceptance matrix` marked done.
- `2026-02-08`: step `03` subtask `freeze contract v1` marked done.
- `2026-02-08`: step `03` fully closed with score `9.5`.
- `2026-02-08`: step `04` subtask `minimal stable entrypoint for common usage` marked done.
- `2026-02-08`: step `04` subtask `advanced hooks explicit namespace/entrypoint` marked done.
- `2026-02-08`: step `04` subtask `remove implicit legacy aliases from stable surface` marked done.
- `2026-02-08`: step `04` fully closed with score `9.5`.
- `2026-02-08`: step `05` subtask `selection/fill-handle orchestration port` marked done.
- `2026-02-08`: step `05` subtask `keyboard navigation parity` marked done.
- `2026-02-08`: step `05` subtask `overlay/pinned layering parity` marked done.
- `2026-02-08`: step `05` fully closed with score `9.5`.
- `2026-02-08`: step `06` subtask `remove duplicated runtime adapter paths` marked done.
- `2026-02-08`: step `06` subtask `root export cleanup` marked done.
- `2026-02-08`: step `06` subtask `compatibility shims with explicit deprecation window` marked done.
- `2026-02-08`: step `06` post-close concrete cleanup (dead modules + stale TODO) completed.
- `2026-02-08`: step `06` component barrel cleanup completed (`index.ts` canonical-only, `legacy.ts` shim-only).
- `2026-02-08`: step `06` stale internal source documentation replaced with current DataGrid source-notes.
- `2026-02-08`: step `06` runtime context/api naming normalized to canonical `DataGrid*` aliases (backward compatible).
- `2026-02-08`: step `06` api-path normalization completed (`core/api/useDataGridApi.ts` is canonical implementation, `useUiTableApi.ts` is compatibility shim with deprecation window).
- `2026-02-08`: step `06` runtime invariant error messages normalized to `DataGrid*` terminology.
- `2026-02-08`: step `06` canonical component barrel switched to `DataGrid*.vue` wrappers (legacy `UiTable*.vue` stays in shim layer only).
- `2026-02-08`: step `06` `DataGrid.vue` switched to canonical toolbar/modals component names (`DataGridToolbar`, `DataGridModals`).
- `2026-02-08`: step `06` runtime internals switched further to canonical names: `DataGrid.vue` now consumes canonical component wrappers (`DataGridHeader`, `DataGridVirtualBodyRegion`, `DataGridSummary`, `DataGridStatusBar`), viewport/overlay/selection runtime migrated to `DataGridOverlay*` types, settings layer now uses canonical aliases (`useDataGridSettingsStore`, `createDataGridSettingsAdapter`), and `DataGridViewport.vue` template artifact (`\\n`) removed.
- `2026-02-08`: step `06` legacy shims now route through canonical components (`components/legacy.ts` exports `UiTable*` from `DataGrid*` wrappers), header facade uses `DataGridHeaderBindings`, and `UiTableRow.vue` now shims to `DataGridRowSurface`.
- `2026-02-08`: step `06` source-of-truth flipped for core layout SFC: full implementations moved to `DataGridHeader.vue`, `DataGridVirtualBodyRegion.vue`, `DataGridSummary.vue`, `DataGridStatusBar.vue`, `DataGridToolbar.vue`, `DataGridModals.vue`, `DataGridHeaderGroup.vue`; corresponding `UiTable*` files are thin wrappers to `DataGrid*`; canonical files now import canonical child components (`DataGridColumnHeader`, `DataGridRowSurface`, `DataGridZoomControl`, `DataGridColumnVisibility`).
- `2026-02-08`: step `06` source-of-truth flipped for all previously thin DataGrid wrappers: `DataGridCell.vue`, `DataGridColumnHeader.vue`, `DataGridColumnVisibility.vue`, `DataGridRowSurface.vue`, `DataGridZoomControl.vue` now hold implementation; matching `UiTable*` files are shim-only wrappers. Added/extended shim contract tests in `components/__tests__/legacyShimPaths.contract.spec.ts` to lock this behavior and prevent canonical `DataGrid*.vue` from importing local `UiTable*`.
- `2026-02-08`: step `06` fully closed with score `9.5`.
- `2026-02-08`: step `08` subtask `Switch Vue demo to @affino/datagrid-vue stable API` marked done (demo bootstrap now uses `useDataGridRuntime`).
- `2026-02-08`: step `07` subtask `Add contract tests against frozen demo behavior matrix` marked done (`useDataGridRuntime` + `DataGrid` contract specs added).
- `2026-02-08`: step `07` subtask `Add interaction tests for key UX paths` marked done (`tests/e2e/datagrid.interactions.spec.ts` + inclusion into `test:e2e:critical`).
- `2026-02-08`: step `07` subtask `Add perf regression checks for selection/fill under virtualization` marked done (`bench-datagrid-interactions.mjs` + harness/report/perf gates wiring).
- `2026-02-08`: step `07` fully closed with score `9.5`.
- `2026-02-08`: step `08` progress - context-menu orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridContextMenu.ts`, and intent-history orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridIntentHistory.ts`; Vue demo switched to these package composables.
- `2026-02-08`: step `08` progress - clipboard bridge extracted into `packages/datagrid-vue/src/composables/useDataGridClipboardBridge.ts` (copy payload/read/parse/selection flash), demo copy flow rewired to package composable.
- `2026-02-08`: step `08` progress - paste/cut/clear orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridClipboardMutations.ts` with contract tests; demo now uses thin action wrappers over package mutations API.
- `2026-02-08`: step `08` progress - header context actions extracted into `packages/datagrid-vue/src/composables/useDataGridHeaderContextActions.ts` with contract tests; demo header action handler switched to package-level orchestration.
- `2026-02-08`: step `08` progress - keyboard command dispatch extracted into `packages/datagrid-vue/src/composables/useDataGridKeyboardCommandRouter.ts` with contract tests; demo keydown command routing now delegates to package composable.
- `2026-02-08`: step `08` progress - cell navigation command routing extracted into `packages/datagrid-vue/src/composables/useDataGridCellNavigation.ts` with contract tests; demo navigation key switch delegated to package composable.
- `2026-02-08`: step `08` progress - inline editor key routing extracted into `packages/datagrid-vue/src/composables/useDataGridInlineEditorKeyRouter.ts` with contract tests; demo `onEditorKeyDown` now delegates to package composable.
- `2026-02-08`: step `08` progress - context-menu action routing extracted into `packages/datagrid-vue/src/composables/useDataGridContextMenuActionRouter.ts` with contract tests; demo `onContextMenuAction` now delegates to package composable.
- `2026-02-08`: step `08` progress - active-cell context-menu anchor logic extracted into `packages/datagrid-vue/src/composables/useDataGridContextMenuAnchor.ts` with contract tests; demo `openContextMenuFromCurrentCell` now delegates to package composable.
- `2026-02-08`: step `08` progress - viewport context-menu routing extracted into `packages/datagrid-vue/src/composables/useDataGridViewportContextMenuRouter.ts` with contract tests; demo `onViewportContextMenu` now delegates to package composable.
- `2026-02-08`: step `08` progress - viewport blur cleanup routing extracted into `packages/datagrid-vue/src/composables/useDataGridViewportBlurHandler.ts` with contract tests; demo `onViewportBlur` now delegates to package composable.
- `2026-02-08`: step `08` progress - global pointer lifecycle routing extracted into `packages/datagrid-vue/src/composables/useDataGridGlobalPointerLifecycle.ts` with contract tests; demo `onGlobalMouseMove/onGlobalMouseUp/onGlobalPointerUp/onGlobalPointerCancel/onGlobalContextMenuCapture/onGlobalWindowBlur` now delegate to package composable.
- `2026-02-08`: step `08` progress - cell pointer-down routing extracted into `packages/datagrid-vue/src/composables/useDataGridCellPointerDownRouter.ts` with contract tests; demo `onDataCellMouseDown` now delegates to package composable.
- `2026-02-08`: step `08` progress - global mousedown context-menu close routing extracted into `packages/datagrid-vue/src/composables/useDataGridGlobalMouseDownContextMenuCloser.ts` with contract tests; demo `onGlobalMouseDown` now delegates to package composable.
- `2026-02-08`: step `08` progress - cell pointer-hover routing extracted into `packages/datagrid-vue/src/composables/useDataGridCellPointerHoverRouter.ts` with contract tests; demo `onDataCellMouseEnter` now delegates to package composable.
- `2026-02-08`: step `08` progress - drag-selection stop lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridDragSelectionLifecycle.ts` with contract tests; demo `stopDragSelection` now delegates to package composable.
- `2026-02-08`: step `08` progress - fill-selection stop lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridFillSelectionLifecycle.ts` with contract tests; demo `stopFillSelection` now delegates to package composable.
- `2026-02-08`: step `08` progress - range-move stop lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridRangeMoveLifecycle.ts` with contract tests; demo `stopRangeMove` now delegates to package composable.
- `2026-02-08`: step `08` progress - tab target resolution extracted into `packages/datagrid-vue/src/composables/useDataGridTabTargetResolver.ts` with contract tests; demo `resolveTabTarget` now delegates to package composable.
- `2026-02-08`: step `08` progress - pointer auto-scroll lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridPointerAutoScroll.ts` with contract tests; demo `startInteractionAutoScroll/stopAutoScrollFrameIfIdle` now delegate to package composable.
- `2026-02-08`: step `08` progress - pointer fill/range preview routing extracted into `packages/datagrid-vue/src/composables/useDataGridPointerPreviewRouter.ts` with contract tests; demo `applyFillPreviewFromPointer/applyRangeMovePreviewFromPointer` now delegate to package composable.
- `2026-02-08`: step `08` progress - drag-pointer selection preview routing extracted into `packages/datagrid-vue/src/composables/useDataGridDragPointerSelection.ts` with contract tests; demo `applyDragSelectionFromPointer` now delegates to package composable.
- `2026-02-08`: step `08` progress - range-move start orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridRangeMoveStart.ts` with contract tests; demo `startRangeMove` now delegates to package composable.
- `2026-02-08`: step `08` progress - pointer cell-coordinate hit-test extracted into `packages/datagrid-vue/src/composables/useDataGridPointerCellCoordResolver.ts` with contract tests; demo `resolveCellCoordFromPointer` now delegates to package composable.
- `2026-02-08`: step `08` progress - axis auto-scroll delta policy extracted into `packages/datagrid-vue/src/composables/useDataGridAxisAutoScrollDelta.ts` with contract tests; demo `resolveAxisAutoScrollDelta` now delegates to package composable.
- `2026-02-08`: step `08` progress - cell visibility scroll policy extracted into `packages/datagrid-vue/src/composables/useDataGridCellVisibilityScroller.ts` with contract tests; demo `ensureCellVisible` now delegates to package composable.
- `2026-02-08`: step `08` progress - header sort orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridHeaderSortOrchestration.ts` with contract tests; demo header sort helpers and mutations now delegate to package composable.
- `2026-02-08`: step `08` progress - header resize orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridHeaderResizeOrchestration.ts` with contract tests; demo header resize lifecycle now delegates to package composable.
- `2026-02-09`: step `08` progress - column-filter orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridColumnFilterOrchestration.ts` with contract tests; demo column-filter state/mutations/predicate/snapshot now delegate to package composable.
- `2026-02-09`: step `08` progress - group-meta orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridGroupMetaOrchestration.ts` with contract tests; demo group-start/badge/group-summary counters now delegate to package composable.
- `2026-02-09`: step `08` progress - grouping-sort orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridGroupingSortOrchestration.ts` with contract tests; demo grouped-sort priority + sort summary now delegate to package composable.
- `2026-02-09`: step `08` progress - viewport/visible-rows sync schedulers extracted into `packages/datagrid-vue/src/composables/useDataGridViewportMeasureScheduler.ts` and `packages/datagrid-vue/src/composables/useDataGridVisibleRowsSyncScheduler.ts` with contract tests; demo RAF scheduling, dedupe sync and cleanup now delegate to package composables.
- `2026-02-09`: step `08` progress - column layout orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridColumnLayoutOrchestration.ts` with contract tests; demo column ordering/metrics/sticky offsets/visible-window/style helpers now delegate to package composable.
- `2026-02-09`: step `08` progress - selection overlay orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridSelectionOverlayOrchestration.ts` with contract tests; demo selection/fill/move overlay segmentation and pixel-snap rendering now delegate to package composable.
- `2026-02-09`: step `08` progress - rows projection orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridRowsProjection.ts` with contract tests; demo quick-filter + column-filter + stable sorting pipeline now delegates to package composable.
- `2026-02-09`: step `08` progress - virtual range metrics extracted into `packages/datagrid-vue/src/composables/useDataGridVirtualRangeMetrics.ts` with contract tests; demo virtual window + spacer heights + range label now delegate to package composable.
- `2026-02-09`: step `08` progress - row selection orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridRowSelectionOrchestration.ts` with contract tests; demo selected-row state, `select all filtered`, and stale-selection reconcile now delegate to package composable.
- `2026-02-09`: step `08` progress - inline-edit orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridInlineEditOrchestration.ts` with contract tests; demo begin/commit/cancel/update flows and edit-intent transaction recording now delegate to package composable.
- `2026-02-09`: step `08` progress - inline editor target navigation extracted into `packages/datagrid-vue/src/composables/useDataGridInlineEditorTargetNavigation.ts` with contract tests; demo tab-navigation target resolution/focus handoff now delegates to package composable.
- `2026-02-09`: step `08` progress - inline editor schema extracted into `packages/datagrid-vue/src/composables/useDataGridInlineEditorSchema.ts` with contract tests; demo enum-editor options/type guard now delegate to package composable.
- `2026-02-09`: step `08` progress - editable value policy extracted into `packages/datagrid-vue/src/composables/useDataGridEditableValuePolicy.ts` with contract tests; demo apply/edit/paste/cut-clear rules now delegate to package strategy-map policy.
- `2026-02-09`: step `08` progress - move mutation policy extracted into `packages/datagrid-vue/src/composables/useDataGridMoveMutationPolicy.ts` with contract tests; demo range-move apply/clear fallback logic now delegates to package composable.
- `2026-02-09`: step `08` progress - cell range helpers extracted into `packages/datagrid-vue/src/composables/useDataGridCellRangeHelpers.ts` with contract tests; demo coord/range normalization, current-cell resolve and in-range checks now delegate to package composable.
- `2026-02-09`: step `08` progress - cell dataset resolver extracted into `packages/datagrid-vue/src/composables/useDataGridCellDatasetResolver.ts` with contract tests; demo dataset row/column -> cell coord resolution now delegates to package composable.
- `2026-02-09`: step `08` progress - group value label resolver extracted into `packages/datagrid-vue/src/composables/useDataGridGroupValueLabelResolver.ts` with contract tests; demo grouped value normalization/empty placeholder policy now delegates to package composable.
- `2026-02-09`: step `08` progress - clipboard value policy extracted into `packages/datagrid-vue/src/composables/useDataGridClipboardValuePolicy.ts` with contract tests; demo clipboard/move string normalization now delegates to package composable.
- `2026-02-09`: step `08` progress - a11y/id and column-ui helper policies extracted into `packages/datagrid-vue/src/composables/useDataGridA11yCellIds.ts` and `packages/datagrid-vue/src/composables/useDataGridColumnUiPolicy.ts` with contract tests; demo removed local helper block (`sanitizeDomIdPart`, header/cell id builders, aria index resolvers, grouped/sortable/resizable/filter-kind/enum-options/column-width policy) and now delegates to advanced package composables.
- `2026-02-09`: step `08` progress - header keyboard/mouse interaction routing extracted into `packages/datagrid-vue/src/composables/useDataGridHeaderInteractionRouter.ts` with contract tests; demo removed local `onHeaderCellClick/onHeaderCellKeyDown` behavior block and now delegates to advanced package router.
- `2026-02-09`: step `08` progress - cell visual-state predicates extracted into `packages/datagrid-vue/src/composables/useDataGridCellVisualStatePredicates.ts` with contract tests; demo removed local cell-state blocks (`isCellInSelection/isCellInCopiedRange/isAnchorCell/isActiveCell/isRangeEndCell/isCellInFillPreview/isCellInMovePreview/shouldShowFillHandle`) and now delegates to advanced package composable.
- `2026-02-09`: step `08` progress - mutation/snapshot/navigation extraction completed for core demo orchestration: added `useDataGridMutationSnapshot.ts`, `useDataGridRangeMutationEngine.ts`, `useDataGridNavigationPrimitives.ts` (with contract tests) and switched demo to these package composables, removing local implementations of snapshot serialization (`capture/apply/toTransactionRange/toSingleCellRange`), range mutation algorithms (`applyRangeMove/applyFillPreview`), and low-level navigation primitives (`resolveColumnIndex/clamp/getAdjacent/applyCellSelection/isCoordInsideRange`).
- `2026-02-09`: step `08` progress - selection move-handle edge/visibility/mousedown routing extracted into `packages/datagrid-vue/src/composables/useDataGridSelectionMoveHandle.ts` with contract tests; demo removed local move-handle helpers and now delegates to advanced package composable.
- `2026-02-09`: step `08` progress - copy-range helpers extracted into `packages/datagrid-vue/src/composables/useDataGridCopyRangeHelpers.ts` with contract tests; demo removed local `isMultiCellSelection/resolveCopyRange` and now delegates to advanced package composable.
- `2026-02-09`: step `08` progress - clear-selection lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridClearSelectionLifecycle.ts` with contract tests; demo `clearCellSelection` now delegates to package lifecycle orchestration.
- `2026-02-09`: step `08` progress - fill-handle drag start lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridFillHandleStart.ts` with contract tests; demo `onSelectionHandleMouseDown` now delegates to package composable.
- `2026-02-09`: step `08` progress - enum-trigger orchestration extracted into `packages/datagrid-vue/src/composables/useDataGridEnumTrigger.ts` with contract tests; demo removed local `shouldShowEnumTrigger/onEnumTriggerMouseDown` and now delegates to package composable.
- `2026-02-09`: step `08` progress - group-badge predicates extracted into `packages/datagrid-vue/src/composables/useDataGridGroupBadge.ts` with contract tests; demo removed local `isGroupStartRow/shouldShowGroupBadge/resolveGroupBadgeText`.
- `2026-02-09`: step `08` progress - viewport scroll lifecycle extracted into `packages/datagrid-vue/src/composables/useDataGridViewportScrollLifecycle.ts` with contract tests; demo `onViewportScroll` now delegates to package composable.
- `2026-02-09`: added step `10` for sugar-layer onboarding API (`60-second setup`), scheduled strictly after full demo-to-package extraction/parity close.
- `2026-02-09`: added architecture guard for advanced layer: one composable must use exactly one state-ownership mode (`advanced->core` push OR `core->advanced->UI` projection), no mixed semantics.
- `2026-02-09`: added step `11` for framework-agnostic orchestration core extraction (`@affino/datagrid-orchestration`) to avoid re-implementing orchestration logic in React/Laravel adapters.
- `2026-02-09`: step `08` progress - row-selection input handlers, quick-filter actions, and history action runner finalized in package (`useDataGridRowSelectionInputHandlers.ts`, `useDataGridQuickFilterActions.ts`, `useDataGridHistoryActionRunner.ts` with contract tests); demo removed local `onSelectAllChange/onRowSelectChange/clearQuickFilter/runHistoryAction` implementations.
- `2026-02-09`: step `08` progress - shared selection comparator, pointer modifier policy, and inline-editor focus orchestration extracted (`useDataGridSelectionComparators.ts`, `useDataGridPointerModifierPolicy.ts`, `useDataGridInlineEditorFocus.ts` with contract tests); demo removed local `rangesEqual/cellCoordsEqual/isRangeMoveModifierActive/focusInlineEditorElement`.
- `2026-02-09`: step `08` progress - additional demo-only helper reduction: removed local `cloneRows`, `applyEditedValueForRange`, and `isActiveCellForEnumTrigger` wrappers by inlining package-driven callbacks in orchestration options (`useDataGridMutationSnapshot`, `useDataGridRangeMutationEngine`, `useDataGridInlineEditOrchestration`, `useDataGridClipboardMutations`, `useDataGridEnumTrigger`).
- `2026-02-09`: step `08` progress - cell coordinate bound-normalization extracted into `packages/datagrid-vue/src/composables/useDataGridCellCoordNormalizer.ts` with contract tests; demo removed local `normalizeCellCoordBase` implementation.
- `2026-02-09`: step `08` progress - demo proxy handlers further thinned: direct delegate bindings now used for context-menu/history/keyboard/pointer/cell events (`onContextMenuAction`, `onEditorKeyDown`, `onGlobal*`, `onDataCell*`, `onViewportBlur`, `onViewportScroll`, `openContextMenuFromCurrentCell`, copy/paste/cut/clear flash wrappers), reducing local wrapper surface in `DataGridPage.vue`.
- `2026-02-09`: step `11` progress - создан `@affino/datagrid-orchestration` как framework-agnostic слой и выполнен первый большой перенос pure orchestration composables из `@affino/datagrid-vue/advanced`; `datagrid-vue` оставляет API совместимым через thin re-export wrappers на orchestration core.
- `2026-02-09`: step `11` progress - выполнен второй пакетный перенос pure orchestration composables (navigation/pointer/range/selection lifecycle helpers) в `@affino/datagrid-orchestration`; суммарно `48` `useDataGrid*` hooks в `@affino/datagrid-vue` переключены на thin wrappers без изменения публичной поверхности.
- `2026-02-09`: step `11` progress - добавлены shared contracts (`context-menu`, `pointer`, `writable-ref`) и вынесены дополнительные orchestration блоки: overlay transform, context-menu action/anchor/router, header context actions, header sort/resize core, clipboard bridge/mutations, intent history, rows projection, grouping/group-meta, column layout, virtual range metrics, selection overlay, row-selection helpers, inline-edit core. Суммарно `67` composables в `datagrid-vue` теперь используют `@affino/datagrid-orchestration`; открытыми остались `3` vue-bound модуля (`column-filter`, `context-menu`, `runtime`).
- `2026-02-09`: step `08` progress - converted remaining interaction wrapper `function` blocks in `DataGridPage.vue` into forward delegate constants (including fill/move/drag/autoscroll/cell-hit/keyboard/context handlers). File now keeps only demo-specific scenario logic (`randomizeRuntime/resetDataset/theme/row synthesis/formatters`) as local functions.
- `2026-02-09`: step `11` progress - завершен перенос последних `3` vue-bound composables (`column-filter`, `context-menu`, `runtime`) в `@affino/datagrid-orchestration`; в `@affino/datagrid-vue` не осталось `useDataGrid*.ts` с собственной orchestration-логикой, только thin Vue bridges и API-совместимые re-export wrappers.
- `2026-02-09`: step `09` fully closed with score `9.5` (getting-started/migration/stable+deprecation docs synced).
- `2026-02-09`: step `10` partial close - high-level sugar API delivered (`useAffinoDataGrid`, `useAffinoDataGridUi`, `AffinoDataGridSimple`) and minimal 60-second flow documented; gating items tied to step `08` parity remain open.
- `2026-02-09`: step `11` adapter-contract item marked done via cross-platform protocol docs (`docs/datagrid-cross-platform-adapter-protocol.md`); remaining blockers are step `08`-gated (`start condition`, thin-adapter completion for non-Vue, and final score).
